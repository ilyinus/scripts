cat Long/rphost*/*.log | grep -Pe ',CALL,.*Context=' | sed -r 's/\xef\xbb\xbf//g;s/^[0-9]+:[0-9]+\.[0-9]+-//;s/CALL.*Context=//;s/,Interface.*$//' | gawk -F ',' '{Dur[$2]+=$1; Exec[$2]+=1; if (Max[$2] < $1) {Max[$2] = $1}; if (Min[$2] == 0 || Min[$2] > $1) {Min[$2] = $1}}END{for (i in Dur) {print Dur[i]/1000000 " длит. (сек); " Exec[i] " кол-во; " Dur[i]/1000000/Exec[i] " сред. (сек); " Max[i]/1000000 " макс. (сек); " Min[i]/1000000 " мин. (сек)#--------------------------------------------------------------------------------------------------------#" i "###--------------------------------------------------------------------------------------------------------"}}' | sort -rnb -k 1 -t ';' | head | sed -r 's/#/\n/g' > CALL.txt